{% load static %}
{% include 'header.html' %}
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">
  {% include 'top.html' %}
  {% include 'nav.html'%}
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        web服务器列表
        <small>Version 1.0</small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">web服务器列表</li>
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">

      <div class="row">
        <div class="col-md-12">
          <div class="box">

          <!-- 上方工具栏 -->
            <div class="box-header with-border">
              <h3 class="box-title">0.0.0.0</h3>
              <div class="box-tools pull-right">
                <a href="#" class="btn btn-box-tool" data-widget="jump" data-original-title='查看详情' title="查看详情" data-toggle="tooltip" style="margin-right:10px">
                  <i class="fa fa-circle-o"></i>
                </a>
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
              </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <!-- 仪表盘  -->

                <!-- /.col -->
              </div>
              <!-- /.row -->
            </div>

          </div>
          <!-- /.box -->
          <!--  后续直接写占位就好了    -->

        </div>
        <!-- /.col -->
      </div>

      <!-- /.row -->
    </section>
    <!-- /.content -->

  </div>

  <div class="control-sidebar-bg"></div>

</div>
<!-- jQuery 2.2.3 -->
{% include 'loadjs.html'%}
<script src="{% static 'js/jquery.knob.js'%}"></script>
<script type="text/javascript">
      notyf.confirm("欢迎查看服务器运行情况...");
      var server = new Vue({
          el:'.wrapper',
          data:{
            info:'',
            test:22,
          }
      })
      setInterval(getdata,1000);
      var temp = 1;
      function getdata(){
        $.post("{% url 'serverlist'%}",{'csrfmiddlewaretoken':'{{csrf_token}}'},function(res){
              server.info = res;
              console.log(1);
              server.test = temp;
              temp += 1;
              $('.knob').knob({
                  draw:function(){
                    this.g.beginPath();
                    this.g.strokeStyle = r ? this.o.fgColor : this.fgColor;
                    this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, sat, eat, false);
                    this.g.stroke();

                    this.g.lineWidth = 2;
                    this.g.beginPath();
                    this.g.strokeStyle = this.o.fgColor;
                    this.g.arc(this.xy, this.xy, this.radius - this.lineWidth + 1 + this.lineWidth * 2 / 3, 0, 2 * Math.PI, false);
                    this.g.stroke();
                    return false;
                  }
              });
        });
      }
      $(".knob").knob({
        draw: function () {

          // "tron" case
          if (this.$.data('skin') == 'tron') {

            var a = this.angle(this.cv)  // Angle
                , sa = this.startAngle          // Previous start angle
                , sat = this.startAngle         // Start angle
                , ea                            // Previous end angle
                , eat = sat + a                 // End angle
                , r = true;

            this.g.lineWidth = this.lineWidth;

            this.o.cursor
            && (sat = eat - 0.3)
            && (eat = eat + 0.3);

            if (this.o.displayPrevious) {
              ea = this.startAngle + this.angle(this.value);
              this.o.cursor
              && (sa = ea - 0.3)
              && (ea = ea + 0.3);
              this.g.beginPath();
              this.g.strokeStyle = this.previousColor;
              this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, sa, ea, false);
              this.g.stroke();
            }

            this.g.beginPath();
            this.g.strokeStyle = r ? this.o.fgColor : this.fgColor;
            this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, sat, eat, false);
            this.g.stroke();

            this.g.lineWidth = 2;
            this.g.beginPath();
            this.g.strokeStyle = this.o.fgColor;
            this.g.arc(this.xy, this.xy, this.radius - this.lineWidth + 1 + this.lineWidth * 2 / 3, 0, 2 * Math.PI, false);
            this.g.stroke();

            return false;
          }
        }
      });

</script>
</body>
</html>
